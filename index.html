<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Parking Secure</title>

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#6C63FF;
  --success:#00C896;
  --danger:#FF5C5C;
  --bg1:#667eea;
  --bg2:#764ba2;
}

body{
  margin:0;
  font-family:'Prompt',sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  color:#fff;
}

.app{
  width:95%;
  max-width:450px;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(15px);
  border-radius:25px;
  padding:25px;
  box-shadow:0 15px 40px rgba(0,0,0,0.3);
}

header{
  text-align:center;
  font-size:22px;
  font-weight:600;
  margin-bottom:20px;
}

.card{
  background:rgba(255,255,255,0.15);
  padding:20px;
  border-radius:20px;
  margin-bottom:15px;
}

input{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:none;
  margin-bottom:10px;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:15px;
  margin:5px 0;
  font-size:15px;
  cursor:pointer;
  transition:0.3s;
}

.btn-in{background:var(--success);color:#fff;}
.btn-out{background:var(--danger);color:#fff;}
.btn-admin{background:var(--primary);color:#fff;}

button:hover{transform:scale(1.05);}

.hidden{display:none;}

table{
  width:100%;
  font-size:12px;
  margin-top:10px;
}

th,td{
  padding:6px;
}

.status{
  text-align:center;
  margin-bottom:10px;
}

</style>
</head>

<body>

<div class="app">
<header>üöó Smart Parking Secure</header>

<div class="card">
<div class="status" id="status"></div>

<h4>üöò ‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏à‡∏≠‡∏î</h4>
<input type="text" id="plateInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏Ç1234">
<button class="btn-in" onclick="checkIn()">‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏à‡∏≠‡∏î</button>

<hr>

<h4>üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏•‡∏≤‡∏ô</h4>
<input type="text" id="ticketInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å Ticket ID">
<button class="btn-out" onclick="checkOut()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å</button>
</div>

<div class="card">
<h4>üîê ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h4>
<input type="password" id="adminPass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô">
<button class="btn-admin" onclick="adminLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>

<div id="adminPanel" class="hidden">
<p id="summary"></p>
<table id="logTable"></table>
</div>
</div>

</div>

<script>
const MAX_PARKING = 5;
const PRICE_PER_HOUR = 20;
const ADMIN_PASSWORD = "admin123";

function getData(){
  return JSON.parse(localStorage.getItem("parkingLogs"))||[];
}

function saveData(data){
  localStorage.setItem("parkingLogs",JSON.stringify(data));
}

function updateStatus(){
  const active=getData().filter(d=>!d.time_out);
  document.getElementById("status").innerText=
  "üöò ‡∏£‡∏ñ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô "+active.length+" / "+MAX_PARKING+" ‡∏ä‡πà‡∏≠‡∏á";
}

function generateTicket(){
  return "PK-" + Math.floor(10000 + Math.random()*90000);
}

function checkIn(){
  let plate=document.getElementById("plateInput").value.trim();
  if(!plate){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ");
    return;
  }

  let data=getData();
  if(data.filter(d=>!d.time_out).length>=MAX_PARKING){
    alert("‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡πÄ‡∏ï‡πá‡∏°");
    return;
  }

  let ticket=generateTicket();

  data.push({
    plate:plate,
    ticket:ticket,
    time_in:new Date().toISOString(),
    time_out:null,
    price:0
  });

  saveData(data);
  updateStatus();

  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\nTicket ID: "+ticket);
  document.getElementById("plateInput").value="";
}

function checkOut(){
  let ticket=document.getElementById("ticketInput").value.trim();
  if(!ticket){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Ticket ID");
    return;
  }

  let data=getData();
  let record=data.find(d=>d.ticket===ticket && !d.time_out);

  if(!record){
    alert("‡πÑ‡∏°‡πà‡∏û‡∏ö Ticket ‡∏ô‡∏µ‡πâ");
    return;
  }

  const timeIn=new Date(record.time_in);
  const timeOut=new Date();
  const minutes=Math.ceil((timeOut-timeIn)/60000);
  const hours=Math.ceil(minutes/60);
  const price=hours*PRICE_PER_HOUR;

  record.time_out=timeOut.toISOString();
  record.price=price;

  saveData(data);
  updateStatus();

  alert("‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô: "+record.plate+"\n‡∏Ñ‡πà‡∏≤‡∏à‡∏≠‡∏î: "+price+" ‡∏ö‡∏≤‡∏ó");
  document.getElementById("ticketInput").value="";
}

function adminLogin(){
  if(document.getElementById("adminPass").value===ADMIN_PASSWORD){
    loadReport();
    document.getElementById("adminPanel").classList.remove("hidden");
  }else{
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏¥‡∏î");
  }
}

function loadReport(){
  const data=getData();
  let total=data.reduce((sum,d)=>sum+d.price,0);

  document.getElementById("summary").innerText=
  "üìä ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î "+data.length+" ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ | ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏° "+total+" ‡∏ö‡∏≤‡∏ó";

  let table="<tr><th>‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</th><th>Ticket</th><th>‡πÄ‡∏Ç‡πâ‡∏≤</th><th>‡∏≠‡∏≠‡∏Å</th><th>‡∏£‡∏≤‡∏Ñ‡∏≤</th></tr>";

  data.forEach(d=>{
    table+="<tr><td>"+d.plate+"</td><td>"+d.ticket+"</td><td>"+(d.time_in||"-")+"</td><td>"+(d.time_out||"-")+"</td><td>"+d.price+"</td></tr>";
  });

  document.getElementById("logTable").innerHTML=table;
}

updateStatus();
</script>

</body>
</html>
