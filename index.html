<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Parking</title>

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#6366f1;
  --success:#10b981;
  --danger:#ef4444;
  --bg:#f4f6fb;
}

body{
  margin:0;
  font-family:'Prompt',sans-serif;
  background:var(--bg);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.app{
  width:95%;
  max-width:420px;
  background:white;
  border-radius:20px;
  padding:25px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

h1{
  text-align:center;
  font-size:22px;
  margin-bottom:15px;
  color:#333;
}

.status-box{
  text-align:center;
  padding:15px;
  border-radius:15px;
  margin-bottom:20px;
  font-weight:600;
  background:#eef2ff;
  color:var(--primary);
}

input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #ddd;
  margin-bottom:10px;
  font-size:14px;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  font-size:14px;
  cursor:pointer;
  margin-bottom:10px;
  transition:0.2s;
}

button:hover{
  transform:scale(1.03);
}

.btn-in{background:var(--success);color:white;}
.btn-out{background:var(--danger);color:white;}

hr{
  margin:20px 0;
  border:none;
  border-top:1px solid #eee;
}
</style>
</head>

<body>

<div class="app">
<h1>üöó Smart Parking</h1>

<div class="status-box" id="status">
‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...
</div>

<h3>‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏à‡∏≠‡∏î‡∏£‡∏ñ</h3>
<input type="text" id="plateIn" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ">
<button class="btn-in" onclick="checkIn()">‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£</button>

<hr>

<h3>‡∏£‡∏ñ‡∏≠‡∏≠‡∏Å</h3>
<input type="text" id="plateOut" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ">
<button class="btn-out" onclick="checkOut()">‡∏£‡∏ñ‡∏≠‡∏≠‡∏Å</button>

</div>

<script>
const MAX_SLOT = 4;

function getData(){
  return JSON.parse(localStorage.getItem("parking")) || [];
}

function saveData(data){
  localStorage.setItem("parking", JSON.stringify(data));
}

function updateUI(){
  const data = getData();
  const count = data.length;

  const status = document.getElementById("status");

  if(count >= MAX_SLOT){
    status.style.background = "#fee2e2";
    status.style.color = "#b91c1c";
    status.innerHTML = `‚ùå ‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß (${count}/${MAX_SLOT})`;
  }else{
    status.style.background = "#ecfdf5";
    status.style.color = "#065f46";
    status.innerHTML = `‚úÖ ‡∏ß‡πà‡∏≤‡∏á ${MAX_SLOT-count} ‡∏ä‡πà‡∏≠‡∏á (${count}/${MAX_SLOT})`;
  }
}

function checkIn(){
  const plate = document.getElementById("plateIn").value.trim();
  if(!plate){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ");
    return;
  }

  const data = getData();

  if(data.length >= MAX_SLOT){
    alert("‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß!");
    return;
  }

  data.push({
    plate:plate,
    time:new Date().toLocaleString()
  });

  saveData(data);
  updateUI();
  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡πÑ‡∏°‡πâ‡∏Å‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡∏¥‡∏î");
  document.getElementById("plateIn").value="";
}

function checkOut(){
  const plate = document.getElementById("plateOut").value.trim();
  if(!plate){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ");
    return;
  }

  let data = getData();
  const newData = data.filter(d => d.plate !== plate);

  if(data.length === newData.length){
    alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ô‡∏µ‡πâ");
    return;
  }

  saveData(newData);
  updateUI();
  alert("‡∏£‡∏ñ‡∏≠‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
  document.getElementById("plateOut").value="";
}

updateUI();
</script>

</body>
</html>
